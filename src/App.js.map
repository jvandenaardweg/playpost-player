{"version":3,"file":"App.js","sourceRoot":"./src-server/","sources":["App.tsx"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,YAAY,CAAC;AACpB,OAAO,EAAE,MAAM,EAAsB,MAAM,qBAAqB,CAAC;AAGjE,IAAM,GAAG,GAAa;IACpB;;;;OAIG;IAEH,aAAa;IACb,IAAM,OAAO,GAAuB,CAAC,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC;IAE9G,aAAa;IACb,IAAM,SAAS,GAAyB,CAAC,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC;IAEtH,IAAM,kBAAkB,GAAG,UAAC,SAAiB;QAC3C,IAAM,GAAG,GAAG,MAAI,SAAW,CAAC;QAC5B,IAAM,KAAK,GAAG,oCAAoC,CAAA;QAClD,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC,CAAA;IAED,IAAM,gCAAgC,GAAG;;QACvC,IAAM,SAAS,GAAG,IAAI,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAErE,IAAM,cAAc,GAAuB;YACzC,WAAW,EAAE,SAAS;YACtB,eAAe,EAAE,SAAS;YAC1B,WAAW,EAAE,SAAS;YACtB,UAAU,EAAE,SAAS;YACrB,oBAAoB,EAAE,SAAS;YAC/B,eAAe,EAAE,SAAS;YAC1B,yBAAyB,EAAE,SAAS;SACrC,CAAA;QAED,IAAI,OAAO,gBACN,cAAc,CAClB,CAAA;QAED,KAAoB,UAA8B,EAA9B,KAAA,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,EAA9B,cAA8B,EAA9B,IAA8B,EAAE;YAAxC,IAAA,eAAG;YACb,IAAM,UAAU,GAAG,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;YACrC,IAAI,UAAU,IAAI,kBAAkB,CAAC,UAAU,CAAC,EAAE;gBAChD,OAAO,yBACF,OAAO,gBACT,GAAG,IAAG,MAAI,UAAY,MACxB,CAAA;aACF;SACF;QAED,OAAO,OAAO,CAAA;IAChB,CAAC,CAAA;IAED,IAAM,kBAAkB,GAAG,gCAAgC,EAAE,CAAA;IAE7D,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,CACL,6BAAK,SAAS,EAAC,KAAK;YAClB,uDAA4B,CACxB,CACP,CAAA;KACF;IAED,IAAI,CAAC,SAAS,EAAE;QACd,OAAO,CACL,6BAAK,SAAS,EAAC,KAAK;YAClB,yDAA8B,CAC1B,CACP,CAAA;KACF;IAED,OAAO,CACL,6BAAK,SAAS,EAAC,KAAK;QAClB,oBAAC,MAAM,IACL,SAAS,EAAE,OAAO,CAAC,EAAE,EACrB,YAAY,EAAE,OAAO,CAAC,KAAK,EAC3B,UAAU,EAAE,OAAO,CAAC,GAAG,EACvB,iBAAiB,EAAE,OAAO,CAAC,UAAU,EACrC,UAAU,EAAE,SAAS,CAAC,KAAK,CAAC,KAAK,EACjC,iBAAiB,EAAE,SAAS,CAAC,KAAK,CAAC,YAAY,EAC/C,YAAY,EAAE,SAAS,CAAC,GAAG,EAC3B,eAAe,EAAE,SAAS,CAAC,MAAM,EACjC,YAAY,EAAE,kBAAkB,GAChC,CACE,CACP,CAAC;AACJ,CAAC,CAAA;AAED,eAAe,GAAG,CAAC","sourcesContent":["import React from 'react';\nimport './App.scss';\nimport { Player, PlayerThemeOptions } from './components/Player';\nimport { Api } from './typings/playpost-api';\n\nconst App: React.FC = () => {\n  /**\n   * Regex to check if the given color code (hex value) is correct.\n   *\n   * @param text\n   */\n\n  // @ts-ignore\n  const article: Api.Article | null = (typeof window !== 'undefined' && window.article) ? window.article : null;\n\n  // @ts-ignore\n  const audiofile: Api.Audiofile | null = (typeof window !== 'undefined' && window.audiofile) ? window.audiofile : null;\n\n  const isCorrectColorCode = (colorCode: string): boolean => {\n    const hex = `#${colorCode}`;\n    const regex = /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/\n    return regex.test(hex);\n  }\n\n  const getUserDefinedPlayerThemeOptions = () => {\n    const urlParams = new window.URLSearchParams(window.location.search);\n\n    const defaultOptions: PlayerThemeOptions = {\n      buttonColor: '#0066FF', // tintColor\n      backgroundColor: '#ffffff',\n      borderColor: '#e5e5e5', // grayLight\n      titleColor: '#000000',\n      trackBackgroundColor: '#000000',\n      trackThumbColor: '#000000',\n      trackLabelBackgroundColor: '#000000'\n    }\n\n    let options: PlayerThemeOptions = {\n      ...defaultOptions\n    }\n\n    for (const [key] of Object.entries(defaultOptions)) {\n      const paramValue = urlParams.get(key)\n      if (paramValue && isCorrectColorCode(paramValue)) {\n        options = {\n          ...options,\n          [key]: `#${paramValue}`\n        }\n      }\n    }\n\n    return options\n  }\n\n  const playerThemeOptions = getUserDefinedPlayerThemeOptions()\n\n  if (!article) {\n    return (\n      <div className=\"App\">\n        <p>could not get article</p>\n      </div>\n    )\n  }\n\n  if (!audiofile) {\n    return (\n      <div className=\"App\">\n        <p>could not get audiofile</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"App\">\n      <Player\n        articleId={article.id}\n        articleTitle={article.title}\n        articleUrl={article.url}\n        articleSourceName={article.sourceName}\n        voiceLabel={audiofile.voice.label}\n        voiceLanguageCode={audiofile.voice.languageCode}\n        audiofileUrl={audiofile.url}\n        audiofileLength={audiofile.length}\n        themeOptions={playerThemeOptions}\n      />\n    </div>\n  );\n}\n\nexport default App;\n"]}