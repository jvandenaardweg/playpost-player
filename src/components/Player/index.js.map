{"version":3,"file":"index.js","sourceRoot":"./src-server/","sources":["components/Player/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react'\nimport ReactPlayer from 'react-player';\nimport { Range, getTrackBackground } from 'react-range';\n\nimport { Duration } from '../Duration';\n\nimport * as analytics from '../../utils/analytics'\n\nimport './index.scss'\n\nimport { URL_APPLE_APP_STORE, URL_GOOGLE_PLAY_STORE, URL_PLAYPOST_WEBSITE } from '../../constants/urls';\nimport { getPlatform } from '../../utils/platform';\nimport { Button } from '../Button';\nimport { Modal, ModalContentAppStores } from '../Modal';\nimport * as Icons from '../Icons';\n\nexport interface PlayerThemeOptions {\n  buttonColor: string;\n  backgroundColor: string;\n  borderColor: string;\n  titleColor: string;\n  trackBackgroundColor: string;\n  trackThumbColor: string;\n  trackLabelBackgroundColor: string;\n}\n\ninterface Props {\n  audiofileUrl: string;\n  articleId: string;\n  articleTitle: string;\n  articleUrl: string;\n  articleSourceName: string;\n  voiceLabel: string;\n  voiceLanguageCode: string;\n  audiofileLength: number;\n  themeOptions: PlayerThemeOptions\n}\n\ninterface State {\n  audiofileUrl: string;\n  platform: string;\n  isError: boolean;\n  isLoading: boolean;\n  isPlaying: boolean;\n  isMuted: boolean;\n  isSeeking: boolean;\n  isReady: boolean;\n  showAppStoresModal: boolean;\n  showSettingsModal: boolean;\n  volume: number;\n  duration: number;\n  playbackRate: number;\n  played: number;\n  playedSeconds: number;\n  loaded: number;\n  loadedSeconds: number\n}\n\nexport class Player extends React.PureComponent<Props, State> {\n  state = {\n    audiofileUrl: '',\n    platform: '',\n    isError: false,\n    isLoading: false,\n    isPlaying: false,\n    isMuted: false,\n    isSeeking: false,\n    isReady: false,\n    showAppStoresModal: false,\n    showSettingsModal: false,\n    volume: 1.0,\n    duration: 0,\n    playbackRate: 1.0,\n    played: 0,\n    playedSeconds: 0,\n    loaded: 0,\n    loadedSeconds: 0\n  }\n\n  private playerRef = React.createRef<ReactPlayer>()\n  private rangeMin = 0;\n  private rangeMax = 1;\n  private rangeStep = 0.0001;\n\n  private appStoreRedirect: number | null = null\n\n  componentDidMount() {\n    const { audiofileLength, themeOptions } = this.props\n    const platform = getPlatform(navigator)\n\n    this.setState({ duration: audiofileLength, platform })\n\n    console.log('Playpost Player Init: Using themeOptions: ', themeOptions)\n    console.log('Playpost Player Init: Using duration: ', audiofileLength)\n    console.log('Playpost Player Init: Using platform: ', platform)\n  }\n\n  componentWillUnmount() {\n    if (this.appStoreRedirect) {\n      window.clearTimeout(this.appStoreRedirect)\n      this.appStoreRedirect = null\n    }\n  }\n\n  handleOnClickPlayPause = () => {\n    const { isPlaying, audiofileUrl } = this.state\n\n    const isLoading = !audiofileUrl && !this.state.isLoading;\n\n    if (isPlaying) {\n      analytics.trackEvent('click_pause', this.props.articleId)\n    } else {\n      analytics.trackEvent('click_play', this.props.articleId)\n    }\n\n    this.setState({ isPlaying: !isPlaying, isLoading, audiofileUrl: this.props.audiofileUrl })\n  }\n\n  handleVolumeChange = (e: any) => {\n    this.setState({ volume: parseFloat(e.target.value) })\n  }\n\n  handleToggleMuted = () => {\n    const { isMuted } = this.state\n    this.setState({ isMuted: !isMuted })\n  }\n\n  handleSetPlaybackRate = (e: any) => {\n    this.setState({ playbackRate: parseFloat(e.target.value) })\n  }\n\n  handleOnPlay = () => {\n    console.log('handleOnPlay')\n    this.setState({ isPlaying: true, isLoading: false })\n  }\n\n  handleOnPause = () => {\n    console.log('handleOnPause')\n    this.setState({ isPlaying: false })\n  }\n\n  handleRangeOnChange = (value: number[]) => {\n    console.log('handleRangeOnChange', value)\n\n    this.setState({ played: value[0], isSeeking: true })\n  }\n\n  handleRangeOnFinalChange = (value: number[]) => {\n    this.setState({ isSeeking: false })\n\n    console.log('handleRangeOnFinalChange', value)\n\n    if (this.playerRef && this.playerRef.current) {\n      this.playerRef.current.seekTo(value[0])\n    }\n  }\n\n  handleOnProgress = (\n    progressState: {\n      played: number,\n      playedSeconds: number,\n      loaded: number,\n      loadedSeconds: number\n    }\n  ) => {\n    const { isSeeking } = this.state;\n    console.log('handleOnProgress', progressState)\n\n    // We only want to update time slider if we are not currently isSeeking\n    if (!isSeeking) {\n      this.setState({\n        ...progressState,\n        isLoading: false\n      })\n    }\n  }\n\n  handleOnEnded = () => {\n    console.log('handleOnEnded')\n    this.setState({ isPlaying: false })\n  }\n\n  handleOnDuration = (duration: number) => {\n    console.log('handleOnDuration', duration)\n    this.setState({ duration })\n  }\n\n  handleOnError = (error: any, data?: any) => {\n    this.setState({ isLoading: false, isPlaying: false })\n  }\n\n  handleOnSeek = (seconds: number) => {\n    console.log('handleOnSeek', seconds)\n  }\n\n  handleOnBuffer = () => {\n    console.log('handleOnBuffer')\n  }\n\n  handleOnStart = () => {\n    console.log('handleOnStart')\n  }\n\n  handleOnReady = () => {\n    console.log('handleOnReady')\n  }\n\n  handleOnClickTryAgain = () => {\n    console.log('handleOnClickTryAgain')\n    window.location.reload()\n  }\n\n  handleOnClickSave = () => {\n    const { platform } = this.state\n    const { articleId } = this.props\n\n    window.location.href = `playpost://playlist/add/${articleId}`;\n\n    const appStoreUrl = platform === 'ios' ? URL_APPLE_APP_STORE : platform === 'android' ? URL_GOOGLE_PLAY_STORE : ''\n\n    if (appStoreUrl) {\n      analytics.trackEvent('click_save', this.props.articleId, {\n        platform,\n        appStoreUrl\n      })\n\n      this.setState({ showAppStoresModal: true })\n\n      this.appStoreRedirect = window.setTimeout(() => {\n        window.location.href = URL_APPLE_APP_STORE\n      }, 1000);\n    } else {\n      analytics.trackEvent('click_save', this.props.articleId, {\n        platform\n      })\n\n      this.setState({ showAppStoresModal: true })\n    }\n\n  }\n\n  handleOnClickCloseAppStoresModal = () => {\n    this.setState({ showAppStoresModal: false })\n  }\n\n  handleOnClickCloseErrorModal = () => {\n    this.setState({ isError: false })\n  }\n\n  handleOnClickToggleSettings = () => {\n    const { showSettingsModal } = this.state\n    this.setState({ showSettingsModal: !showSettingsModal })\n    console.log('handleOnClickToggleSettings')\n  }\n\n  render () {\n    const { isPlaying, volume, isMuted, played, duration, playbackRate, audiofileUrl, isLoading, isError, loaded, showAppStoresModal, showSettingsModal } = this.state\n    const { articleTitle, articleUrl, voiceLabel, articleSourceName, themeOptions, voiceLanguageCode } = this.props\n\n    const buttonThemeStyle: React.CSSProperties = { backgroundColor: themeOptions.buttonColor }\n    const playerContainerThemeStyle: React.CSSProperties = { backgroundColor: themeOptions.backgroundColor, borderColor: themeOptions.borderColor }\n    const titleThemeStyle: React.CSSProperties = { color: themeOptions.titleColor }\n    const trackThumbStyle: React.CSSProperties = { backgroundColor: themeOptions.trackThumbColor }\n    const trackLabelStyle: React.CSSProperties = { backgroundColor: themeOptions.trackLabelBackgroundColor }\n\n    return (\n      <div className=\"Player\">\n        {isError && (\n          <Modal onClickClose={this.handleOnClickCloseErrorModal} />\n        )}\n\n        {showAppStoresModal && (\n          <Modal onClickClose={this.handleOnClickCloseAppStoresModal}>\n            <ModalContentAppStores />\n          </Modal>\n        )}\n\n        {showSettingsModal && (\n          <Modal onClickClose={this.handleOnClickToggleSettings}>\n            <p>Choose a voice</p>\n          </Modal>\n        )}\n\n        <div className=\"Player__container\" style={playerContainerThemeStyle}>\n          <ReactPlayer\n            ref={this.playerRef}\n            className=\"Player__react-player\"\n            width=\"100%\"\n            height=\"100%\"\n            url={audiofileUrl}\n            playing={isPlaying}\n            controls={false}\n            playbackRate={playbackRate}\n            volume={volume}\n            muted={isMuted}\n            progressInterval={1000}\n            loop={false}\n            config={{\n              file: {\n                forceAudio: true\n              }\n            }}\n            onReady={this.handleOnReady}\n            onStart={this.handleOnStart}\n            onPlay={this.handleOnPlay}\n            onPause={this.handleOnPause}\n            onBuffer={this.handleOnBuffer}\n            onSeek={this.handleOnSeek}\n            onEnded={this.handleOnEnded}\n            onError={this.handleOnError}\n            onProgress={this.handleOnProgress}\n            onDuration={this.handleOnDuration}\n          />\n\n          <div className=\"Player__top-container\">\n            <div className=\"Player__play-control-container\">\n              <button\n                type=\"button\"\n                disabled={isLoading}\n                className=\"Player__play-control-button\"\n                onClick={this.handleOnClickPlayPause}\n                style={buttonThemeStyle}\n              >\n                {isLoading && <Icons.Loading />}\n                {!isLoading && isPlaying ? <Icons.Pause /> : !isLoading ? <Icons.Play /> : ''}\n              </button>\n            </div>\n            <div className=\"Player__info-container\">\n              <div>\n                <h1 className=\"Player__title\" style={titleThemeStyle}>\n                  <a href={articleUrl} style={titleThemeStyle}>{articleTitle}</a>\n                  </h1>\n                <h2 className=\"Player__subtitle\">\n                  <a href={articleUrl}>{articleSourceName}</a>, voice: {voiceLabel} ({voiceLanguageCode})\n                </h2>\n              </div>\n              <div className=\"Player__action\">\n                <Button onClick={this.handleOnClickSave}>Save to Playpost</Button>\n              </div>\n            </div>\n            {/* <div className=\"Player__top-actions-container\">\n              <Button onClick={this.handleOnClickSave}>Save to Playpost</Button> &nbsp;\n              <Button onClick={this.handleOnClickToggleSettings} type=\"clean\"><Icons.Settings /></Button>\n            </div> */}\n          </div>\n          <div className=\"Player__bottom-container\">\n            <div className=\"Player__progress-container\">\n              <div className=\"Player__progress-control-container\">\n              <Range\n                step={this.rangeStep}\n                min={this.rangeMin}\n                max={this.rangeMax}\n                values={[played]}\n                onChange={this.handleRangeOnChange}\n                onFinalChange={this.handleRangeOnFinalChange}\n                renderTrack={({ props, children }) => (\n                  <div onMouseDown={props.onMouseDown} onTouchStart={props.onTouchStart} className=\"Player__range-track-container\">\n                    <div\n                      ref={props.ref}\n                      style={{\n                        ...props.style,\n                        background: getTrackBackground({\n                          values: [played, loaded],\n                          colors: [themeOptions.trackBackgroundColor, '#AAAAAA', '#e5e5e5'],\n                          min: this.rangeMin,\n                          max: this.rangeMax\n                        })\n                      }}\n                      className=\"Player__range-track-inner\">\n                        {children}\n                      </div>\n                  </div>\n\n                )}\n                renderThumb={({ props, isDragged }) => (\n                  <div {...props} className=\"Player__range-thumb-container\">\n                    <div\n                      className={`Player__range-thumb ${isDragged ? 'Player__range-thumb--is-dragging' : ''}`}\n                      style={trackThumbStyle}\n                    ></div>\n                    {isDragged && (\n                      <div className=\"Player__range-thumb-label\" style={trackLabelStyle}>\n                        <Duration seconds={duration * played} />\n                      </div>\n                    )}\n                  </div>\n                )}\n              />\n              </div>\n              <div className=\"Player__progress-time-container\">\n                <div className={`Player__progress-time Player__progress-time--played ${isPlaying ? 'is-playing' : ''}`}>\n                  <Duration seconds={duration * played} />\n                </div>\n                <a href={URL_PLAYPOST_WEBSITE} className=\"Player__progress-time-branding\" target=\"_blank\" rel=\"noopener noreferrer\">Audio by <span>Playpost</span></a>\n                <div className={`Player__progress-time Player__progress-time--remaining ${isPlaying ? 'is-playing' : ''}`}>\n                  <Duration seconds={duration * (1 - played)} />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n"]}